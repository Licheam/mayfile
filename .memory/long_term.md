# 项目长期记忆

## 项目概述
*更新于: 2026-02-06 15:11*

### Mayfile
一个极简的粘贴板系统（原名 pastebin）。

## 架构决策
<!-- 重要的架构选择及其理由 -->
### 引入 original_duration
为了支持“祈愿（Renew）”续命功能并保持生命条比例准确，在数据库中增加了 `original_duration` 字段。生命值百分比计算公式改为 `(expires_at - now) / original_duration`。

## 代码风格与约定
*更新于: 2026-02-06 15:45*

### 生命周期计算
使用 `expires_at - now` 与 `original_duration` 的比例来计算剩余生命百分比。续命后，进度条会回弹至 100%。

## 技术选型
*更新于: 2026-02-06 15:45*

### 核心技术栈
- **后端**: Rust (Axum)
- **模板引擎**: Askama
- **数据库**: SQLite
- **前端交互**: HTMX

## 重要约束与注意事项
<!-- 不能忘记的坑、限制、特殊要求 -->
### 祈愿（Renew）机制
- **适用对象**：仅限公开（is_public=1）且非阅后即焚（max_views=null）的帖子。
- **触发时机**：只有在剩余寿命 < 50% 时才允许操作。
- **状态同步**：后端返回 `HX-Trigger` 事件 `renewed`，前端通过监听该事件即时更新 `data-expires` 并刷新 UI。
